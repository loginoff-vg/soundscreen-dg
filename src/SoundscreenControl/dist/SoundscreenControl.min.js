DG.Control.Soundscreen=DG.RoundControl.extend({options:{position:"topright"},statics:{Dictionary:{}},initialize:function(options){DG.setOptions(this,options||{}),DG.extend(this,{_active:!1,_geoclickerNeedRestore:!1}).on(this._controlEvents,this)},_controlEvents:{add:function(){!this._map.soundscreen},click:function(){if(this._active)this._map.soundscreen.disable(),this.setState("");else{try{this._map.soundscreen.enable()}catch(err){if(this._map.soundscreen.options.debug){console.error(err.message);var content="<h3>Error</h3>"+DG.Soundscreen.tools.objectMap(err,{own:!0}).join("<br>");this._map.openPopup(content,this._map.getCenter())}}this.setState("active")}this._active=!this._active,this._renderTranslation()},remove:function(){this.off(this._controlEvents,this),this._active&&(this._map.soundscreen.disable(),this._active=!1),this._map.soundscreen=null}},_renderTranslation:function(){this._link.innerHTML=this.t(this._active?"off":"on")}}),DG.Map.mergeOptions({soundscreen:!1}),DG.Map.addInitHook(function(){if(this.options.soundscreen){try{this.soundscreen=new DG.Soundscreen(this,this.options.soundscreen),this._handlers.push(this.soundscreen)}catch(err){return void(this.options.soundscreen.debug&&console.error(err.message,err.fileName,err.lineNumber,err.columnNumber))}this.soundscreenControl=new DG.Control.Soundscreen(this.options.soundscreen.control),this.addControl(this.soundscreenControl)}}),DG.Control.Soundscreen.Dictionary.en={on:"Run screenreaders support",off:"Stop screenreaders support",browser_not_supported:"browser not supported"},DG.Control.Soundscreen.Dictionary.ru={on:"Включить поддержку скринридера",off:"Отключить поддержку скринридера",browser_not_supported:"В этом браузере не работает"};